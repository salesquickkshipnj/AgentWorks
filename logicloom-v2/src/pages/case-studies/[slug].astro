---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const studies = await getCollection('case-studies');

  return studies.map((study) => ({
    params: { slug: study.slug },
    props: study,
  }));
}

const study = Astro.props;
const { Content } = await study.render();

const title = study.data.title ?? 'Case Study';
const description =
  study.data.description ??
  study.data.metric ??
  'Real results from our automation architectures.';
---

<Layout title={`${title} | Case Study | LogicLoom`} description={description}>
  <article class="py-32 px-6 max-w-4xl mx-auto">
    <div class="mb-10">
      <div class="text-xs font-bold uppercase tracking-widest text-blue-600 mb-3">
        {study.data.industry}
      </div>

      <h1 class="font-display text-4xl md:text-6xl font-bold mb-4">
        {title}
      </h1>

      {study.data.metric && (
        <div class="mt-4 inline-flex items-center gap-2 text-gray-600 font-mono text-sm bg-gray-50 border border-gray-100 rounded-full px-4 py-2">
          <i class="ph ph-trend-up text-green-500"></i>
          <span>{study.data.metric}</span>
        </div>
      )}
    </div>

    <div class="prose prose-lg prose-slate max-w-none">
      <Content />
    </div>
  </article>
</Layout>
