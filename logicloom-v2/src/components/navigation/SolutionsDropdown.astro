---
import { Icon } from 'astro-icon/components';

// COLUMN 1: INDUSTRIES
const topIndustries = [
  { 
    name: "Roofing & Trades", 
    desc: "Auto-dispatch & estimation.", 
    icon: "ph:house-line", 
    href: "/industries/roofing-automation",
    color: "text-orange-600",
    bg: "bg-orange-50"
  },
  { 
    name: "Restaurants & Catering", 
    desc: "Zero-latency event booking.", 
    icon: "ph:fork-knife", 
    href: "/industries/restaurant-automation",
    color: "text-amber-600",
    bg: "bg-amber-50"
  },
  { 
    name: "Gyms & Fitness", 
    desc: "Churn reduction engines.", 
    icon: "ph:barbell", 
    href: "/industries/fitness-automation",
    color: "text-red-600",
    bg: "bg-red-50"
  }
];

const hiddenIndustries = [
  { 
    name: "Cleaning Services", 
    desc: "Remote estimation systems.", 
    icon: "ph:broom", 
    href: "/industries/cleaning-solutions",
    color: "text-blue-600",
    bg: "bg-blue-50"
  },
  { 
    name: "Dental Practices", 
    desc: "HIPAA-compliant intake.", 
    icon: "ph:tooth", 
    href: "/industries/dental-automation",
    color: "text-teal-600",
    bg: "bg-teal-50"
  },
  { 
    name: "Real Estate", 
    desc: "Lead qualification agents.", 
    icon: "ph:buildings", 
    href: "/industries/real-estate-ai",
    color: "text-emerald-600",
    bg: "bg-emerald-50"
  },
  { 
    name: "Legal Automation", 
    desc: "Document & Intake flow.", 
    icon: "ph:gavel", 
    href: "/industries/legal-automation",
    color: "text-amber-600",
    bg: "bg-amber-50"
  }
];

// COLUMN 2: WORKFLOWS
const workflows = [
  {
    name: "Lead-to-CRM",
    desc: "Instant speed-to-lead.",
    icon: "ph:lightning",
    href: "/use-cases/lead-to-crm",
    color: "text-indigo-600",
    bg: "bg-indigo-50"
  },
  {
    name: "Inbox Triage",
    desc: "AI support agents.",
    icon: "ph:envelope-open",
    href: "/use-cases/inbox-triage",
    color: "text-sky-600",
    bg: "bg-sky-50"
  },
  {
    name: "Zapier Migration",
    desc: "Cut costs by 90%.",
    icon: "ph:arrows-merge",
    href: "/zapier-to-n8n",
    color: "text-orange-600",
    bg: "bg-orange-50"
  }
];
---

<div 
  x-data="{ open: false, expanded: false }" 
  @click.outside="open = false; expanded = false" 
  class="relative"
>
  
  <button 
    @click="open = !open" 
    class="flex items-center gap-1 text-sm font-medium text-gray-600 hover:text-slate-900 transition-colors group"
    :class="open ? 'text-slate-900' : ''"
  >
    <span>Solutions</span>
    <Icon 
      name="ph:caret-down" 
      class="text-xs text-gray-400 group-hover:text-slate-900 transition-transform duration-200" 
      :class="open ? 'rotate-180' : ''" 
    />
  </button>

  <div 
    x-show="open" 
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 translate-y-2"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 translate-y-2"
    style="display: none;"
    class="absolute top-full left-1/2 -translate-x-1/2 mt-6 w-[850px] bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-gray-100 overflow-hidden z-50 ring-1 ring-black/5"
  >
    
    <div class="grid grid-cols-2 divide-x divide-gray-50">
        
        <div class="p-8 bg-white flex flex-col h-full">
            <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4 block">By Industry</span>
            
            <div class="space-y-2">
                {topIndustries.map((item) => (
                    <a href={item.href} class="flex items-start gap-4 p-3 rounded-xl hover:bg-gray-50 transition-colors group">
                    <div class={`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${item.bg} ${item.color} group-hover:scale-110 transition-transform duration-200`}>
                        <Icon name={item.icon} class="w-6 h-6" />
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 text-sm leading-tight mb-1 group-hover:text-slate-700 transition-colors">{item.name}</h3>
                        <p class="text-xs text-gray-500 leading-snug">{item.desc}</p>
                    </div>
                    </a>
                ))}

                <button 
                    x-show="!expanded"
                    @click="expanded = true"
                    class="w-full flex items-center justify-center gap-2 p-2 mt-2 rounded-lg border border-dashed border-gray-200 hover:border-slate-300 hover:bg-gray-50 transition-all text-gray-400 hover:text-slate-600 group"
                >
                    <span class="text-xs font-bold">View More Industries</span>
                    <Icon name="ph:caret-down" class="w-3 h-3 group-hover:translate-y-0.5 transition-transform" />
                </button>

                <template x-if="expanded">
                    <div class="space-y-2 pt-2 border-t border-dashed border-gray-100 mt-2 animate-fade-in">
                        {hiddenIndustries.map((item) => (
                            <a href={item.href} class="flex items-start gap-4 p-3 rounded-xl hover:bg-gray-50 transition-colors group">
                            <div class={`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${item.bg} ${item.color} group-hover:scale-110 transition-transform duration-200`}>
                                <Icon name={item.icon} class="w-6 h-6" />
                            </div>
                            <div>
                                <h3 class="font-bold text-slate-900 text-sm leading-tight mb-1 group-hover:text-slate-700 transition-colors">{item.name}</h3>
                                <p class="text-xs text-gray-500 leading-snug">{item.desc}</p>
                            </div>
                            </a>
                        ))}
                        
                        <button 
                            @click="expanded = false"
                            class="w-full flex items-center justify-center gap-2 py-2 text-[10px] font-bold uppercase tracking-widest text-gray-300 hover:text-red-500 transition-colors"
                        >
                            Close
                        </button>
                    </div>
                </template>
            </div>
        </div>

        <div class="p-8 bg-slate-50/50 flex flex-col h-full">
            <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4 block">By Workflow</span>
            
            <div class="space-y-2">
                {workflows.map((item) => (
                    <a href={item.href} class="flex items-start gap-4 p-3 rounded-xl hover:bg-white hover:shadow-sm transition-all group">
                    <div class={`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${item.bg} ${item.color} group-hover:scale-110 transition-transform duration-200`}>
                        <Icon name={item.icon} class="w-6 h-6" />
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 text-sm leading-tight mb-1 group-hover:text-slate-700 transition-colors">{item.name}</h3>
                        <p class="text-xs text-gray-500 leading-snug">{item.desc}</p>
                    </div>
                    </a>
                ))}

                <a 
                    href="/audit"
                    x-show="!expanded"
                    class="w-full flex items-center justify-center gap-2 p-2 mt-2 rounded-lg border border-gray-200 bg-white hover:border-slate-300 hover:bg-gray-50 hover:shadow-sm transition-all text-slate-500 hover:text-slate-900 group"
                >
                    <span class="text-xs font-bold">Request Custom Architecture</span>
                    <Icon name="ph:arrow-right" class="w-3 h-3 group-hover:translate-x-0.5 transition-transform" />
                </a>

                <div 
                    x-show="expanded"
                    class="mt-4 p-5 bg-slate-900 rounded-xl text-white shadow-lg animate-fade-in flex flex-col justify-center flex-grow"
                >
                    <h4 class="text-sm font-bold mb-1">Custom Architecture?</h4>
                    <p class="text-xs text-slate-400 mb-4 leading-relaxed">We build bespoke n8n logic for enterprise teams.</p>
                    <a href="/audit" class="text-xs font-bold flex items-center gap-2 bg-white/10 p-2 rounded-lg text-white hover:bg-white hover:text-slate-900 transition-all justify-center">
                        Request Audit <Icon name="ph:arrow-right" />
                    </a>
                </div>

            </div>
        </div>

    </div>
  </div>
</div>