---
import { Icon } from 'astro-icon/components';
import SolutionsDropdown from './navigation/SolutionsDropdown.astro';
---

<header
  id="main-header"
  class="fixed w-full z-50 top-0 transition-all duration-300 border-b border-transparent"
  x-data="{ 
    mobileMenuOpen: false, 
    toggleMobile() {
        this.mobileMenuOpen = !this.mobileMenuOpen;
        document.body.style.overflow = this.mobileMenuOpen ? 'hidden' : '';
    }
  }"
>
  <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
    
    <a href="/" aria-label="LogicLoom Systems Home" class="group focus:outline-none relative z-50">
        <div class="relative w-auto h-10">
           <svg viewBox="0 0 600 200" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto">
              <g stroke="#94A3B8" stroke-width="2" stroke-opacity="0.5" fill="none" stroke-linecap="round">
                <path d="M50 135 L80 143 L110 157 L140 165 L170 158 L200 144" />
                <path d="M50 102 L80 110 L110 124 L140 132 L170 125 L200 111" />
                <path d="M50 69 L80 77 L110 91 L140 99 L170 92 L200 78" />
                <path d="M50 36 L80 44 L110 58 L140 66 L170 59 L200 45" />
                <path d="M50 135 L50 36" />
                <path d="M80 143 L80 44" />
                <path d="M110 157 L110 58" />
                <path d="M140 165 L140 66" />
                <path d="M170 158 L170 59" />
                <path d="M200 144 L200 45" />
              </g>
              <g fill="#1E293B"> <circle cx="50" cy="135" r="5" /> <circle cx="50" cy="102" r="5" /> <circle cx="50" cy="69" r="5" /> <circle cx="50" cy="36" r="5" /> </g>
              <g fill="#18375C"> <circle cx="80" cy="143" r="5" /> <circle cx="80" cy="110" r="5" /> <circle cx="80" cy="77" r="5" /> <circle cx="80" cy="44" r="5" /> </g>
              <g fill="#12467D"> <circle cx="110" cy="157" r="5" /> <circle cx="110" cy="124" r="5" /> <circle cx="110" cy="91" r="5" /> <circle cx="110" cy="58" r="5" /> </g>
              <g fill="#0C549F"> <circle cx="140" cy="165" r="5" /> <circle cx="140" cy="132" r="5" /> <circle cx="140" cy="99" r="5" /> <circle cx="140" cy="66" r="5" /> </g>
              <g fill="#0663C0"> <circle cx="170" cy="158" r="5" /> <circle cx="170" cy="125" r="5" /> <circle cx="170" cy="92" r="5" /> <circle cx="170" cy="59" r="5" /> </g>
              <g fill="#0071E3"> <circle cx="200" cy="144" r="5" /> <circle cx="200" cy="111" r="5" /> <circle cx="200" cy="78" r="5" /> <circle cx="200" cy="45" r="5" /> </g>
              <text x="230" y="107" font-family="'Space Grotesk', sans-serif" font-weight="bold" font-size="60" fill="#1E293B">LogicLoom</text>
              <text x="232" y="144" font-family="'Space Grotesk', sans-serif" font-weight="500" font-size="30" letter-spacing="1.5" fill="#64748B">SYSTEMS</text>
              <line x1="232" y1="152" x2="350" y2="152" stroke="#0071E3" stroke-width="2" />
           </svg>
        </div>
    </a>

    <nav class="hidden md:flex items-center gap-8">
      <SolutionsDropdown />
      <a href="/#process" class="text-sm font-medium text-gray-600 hover:text-slate-900 transition-colors">Protocol</a>
      <a href="/case-studies" class="text-sm font-medium text-gray-600 hover:text-slate-900 transition-colors">Case Studies</a>
      <a href="/#pricing" class="text-sm font-medium text-gray-600 hover:text-slate-900 transition-colors">Pricing</a>
    </nav>

    <div class="hidden md:flex items-center gap-6">
      <a 
        href="/audit"
        class="text-sm font-bold bg-slate-900 text-white px-6 py-2.5 rounded-full hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 active:scale-95 flex items-center gap-2"
      >
        Book Audit
      </a>
    </div>

    <button @click="toggleMobile()" class="md:hidden text-slate-900 p-2 z-50 relative">
        <Icon name="ph:list" class="text-2xl" x-show="!mobileMenuOpen" />
        <Icon name="ph:x" class="text-2xl" x-show="mobileMenuOpen" style="display:none;" />
    </button>
  </div>

  <div 
      x-show="mobileMenuOpen" 
      style="display: none;"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 -translate-y-2"
      x-transition:enter-end="opacity-100 translate-y-0"
      class="absolute top-0 left-0 w-full bg-white border-b border-gray-200 pt-24 pb-8 px-6 md:hidden shadow-2xl h-screen overflow-y-auto" 
  >
       <div class="space-y-8">
            <div>
                <span class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 block">Core Architectures</span>
                <div class="grid grid-cols-1 gap-4">
                    <a href="/case-studies" class="flex items-center gap-3 text-base font-medium text-slate-900">
                        <Icon name="ph:rocket-launch" class="text-blue-600 text-xl" /> The Growth Engine
                    </a>
                    <a href="/case-studies" class="flex items-center gap-3 text-base font-medium text-slate-900">
                        <Icon name="ph:gear-six" class="text-orange-600 text-xl" /> Operations Autopilot
                    </a>
                    <a href="/case-studies" class="flex items-center gap-3 text-base font-medium text-slate-900">
                        <Icon name="ph:brain" class="text-purple-600 text-xl" /> Service Concierge
                    </a>
                </div>
            </div>

            <div class="space-y-4 pb-4 border-t border-gray-100 pt-6">
                <a href="/#process" @click="toggleMobile()" class="block text-lg font-bold text-gray-600">The Protocol</a>
                <a href="/#pricing" @click="toggleMobile()" class="block text-lg font-bold text-gray-600">Pricing</a>
                <a href="/case-studies" @click="toggleMobile()" class="block text-lg font-bold text-gray-600">Case Studies</a>
            </div>

            <div class="pt-4">
                <a 
                  href="/audit" 
                  class="flex items-center justify-center w-full bg-slate-900 text-white text-lg py-4 rounded-xl font-bold shadow-lg hover:bg-slate-800 transition-colors"
                >
                    Start Feasibility Audit
                </a>
            </div>
      </div>
  </div>
</header>

<script>
  const header = document.getElementById('main-header');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 10) {
      header.classList.add('bg-white/80', 'backdrop-blur-md', 'border-gray-200', 'shadow-sm');
      header.classList.remove('border-transparent');
    } else {
      header.classList.remove('bg-white/80', 'backdrop-blur-md', 'border-gray-200', 'shadow-sm');
      header.classList.add('border-transparent');
    }
  });
</script>