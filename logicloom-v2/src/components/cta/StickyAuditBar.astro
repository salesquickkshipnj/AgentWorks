---
interface Props {
  industry?: string;
  symptom?: string;
}

const { industry = "Business", symptom = "Inefficiency" } = Astro.props;

// Dynamic context injection for the Audit URL
const auditUrl = `/audit?context=${encodeURIComponent(industry)}&symptom=${encodeURIComponent(symptom)}&cta_label=Sticky+Bar`;
---

<div
  x-data="{ show: false, lastScroll: 0 }"
  @scroll.window="
    // Show after scrolling 300px
    show = window.scrollY > 300;
  "
  x-show="show"
  x-transition:enter="transition ease-out duration-500"
  x-transition:enter-start="translate-y-full opacity-0"
  x-transition:enter-end="translate-y-0 opacity-100"
  x-transition:leave="transition ease-in duration-300"
  x-transition:leave-start="translate-y-0 opacity-100"
  x-transition:leave-end="translate-y-full opacity-0"
  class="fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] px-6 py-4 md:py-3"
  style="display: none;" 
>
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
    
    <div class="flex items-center gap-3">
      <div class="hidden md:flex w-10 h-10 rounded-full bg-blue-50 items-center justify-center text-blue-600">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z" /></svg>
      </div>
      <div>
        <p class="text-sm font-bold text-slate-900">
          Scaling a {industry} workflow?
        </p>
        <p class="text-xs text-gray-500 hidden md:block">
          See if your current stack can handle 2x volume without breaking.
        </p>
      </div>
    </div>

    <div class="flex items-center gap-4 w-full md:w-auto">
      <a 
        href={auditUrl}
        class="flex-grow md:flex-none text-center bg-slate-900 text-white text-sm font-bold px-6 py-2.5 rounded-full hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20"
      >
        Run Feasibility Scan
      </a>
      <button 
        @click="show = false" 
        class="text-gray-400 hover:text-slate-900 transition-colors p-2"
        aria-label="Close"
      >
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
      </button>
    </div>

  </div>
</div>